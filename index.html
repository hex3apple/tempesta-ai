<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GULF COAST RESIDENTS PREPARE FOR 83RD “ONCE-IN-A-LIFETIME” HURRICANE THIS DECADE</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="main-header">
    <div class="logo">THE ONION</div>
    <nav class="main-nav">
      <a href="home.html">HOME</a>
      <a href="world.html">WORLD</a>
      <a href="politics.html">POLITICS</a>
      <a href="business.html">BUSINESS</a>
    </nav>
  </header>
  <main class="main-content">
    <div class="main-story">
      <h1>GULF COAST RESIDENTS PREPARE FOR 83RD “ONCE-IN-A-LIFETIME” HURRICANE THIS DECADE</h1>
      <h2>Bayou Lament Braces for Inescapia, the 83rd “Unprecedented” Storm</h2>
      <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=800&q=80" alt="Hurricane" style="max-width:100%;border-radius:8px;margin:1.5em 0;" />
      <p><strong>BAYOU LAMENT, LOUISIANA</strong> — Residents along the Gulf of Mexico are once again stocking up on essentials like bottled water, batteries, and emotional resilience as Hurricane Inescapia becomes the 83rd “once-in-a-lifetime” storm to approach the region in the last ten years.</p>
      <p>Meteorologists describe Inescapia as a Category 4.7 storm—just slightly more powerful than the last one that tore the roof off the local Waffle House but left the soda machine curiously intact.</p>
      <p>“We’re in unprecedented times,” said local weather anchor Bobby “Thunderboy” LeClerc. “In the past, we’d see storms like this maybe once every few decades. Now I have to update the storm graphics so often that I just made a slideshow with flames and screaming sound effects. Much easier.”</p>
      <h2>Gulf of Mexico Now Considered "Soup"</h2>
      <p>Scientists confirm the Gulf’s water temperatures are so hot that the hurricane has started boiling shrimp as it churns. NOAA now classifies the Gulf as “bisque-adjacent.”</p>
      <p>“Inescapia is gaining strength quickly,” said NOAA spokesperson Dr. Leslie Drench. “It’s feeding off the Loop Current, warm ocean water, and possibly the tears of exhausted meteorologists.”</p>
      <p>When asked what residents should do, she replied: “Leave. Or construct your home out of concrete, hope, and possibly Lego bricks. Those seem indestructible.”</p>
      <h2>Florida Man Vows to Fight Storm With Bare Hands</h2>
      <p>Meanwhile, in Pensacola, local resident Randy “Hurricane Hands” Jenkins says he’s “not scared of no wind.” He’s gone viral after announcing plans to “square up” with the hurricane in a Walmart parking lot.</p>
      <p>“I got duct tape, a six-pack, and a tarp. That’s all I need,” he declared. Authorities have asked him to stop trying to register as a tropical depression.</p>
      <h2>Government Unveils New “Storm Points” Loyalty Program</h2>
      <p>To boost morale, FEMA has introduced a new loyalty program where Gulf Coast residents earn “Storm Points” for each evacuation. Redeemable rewards include inflatable rafts, wet socks, and a free sandwich from a gas station in Biloxi.</p>
      <p>“We figure if Starbucks can gamify coffee, we can gamify disaster,” said one FEMA official, who asked not to be named because he was floating down Canal Street in a canoe.</p>
      <p>Stay tuned for further updates, unless we lose power again. In which case, we recommend yelling loudly into the wind. It won’t change anything, but it might feel good.</p>
      <a href="world.html" style="display:inline-block;margin-top:2em;">&larr; Back to World News</a>
    </div>
    <aside class="sidebar" id="sidebar-articles">
      <ul style="list-style:none;padding:0;margin:0;">
        <li style="margin-bottom:1.2em;"><a href="texas-breeze.html" style="display:block;padding:1em 1.2em;background:#fff;border-radius:6px;box-shadow:0 1px 4px rgba(0,0,0,0.04);color:#232728;text-decoration:none;font-weight:600;">Texas Declares State of Emergency Over Mild Breeze</a></li>
        <li style="margin-bottom:1.2em;"><a href="sandbags.html" style="display:block;padding:1em 1.2em;background:#fff;border-radius:6px;box-shadow:0 1px 4px rgba(0,0,0,0.04);color:#232728;text-decoration:none;font-weight:600;">Study Finds 9 out of 10 Sandbags Useless but Comforting</a></li>
        <li style="margin-bottom:1.2em;"><a href="stormtok.html" style="display:block;padding:1em 1.2em;background:#fff;border-radius:6px;box-shadow:0 1px 4px rgba(0,0,0,0.04);color:#232728;text-decoration:none;font-weight:600;">Meteorologists Launch Spin-off Channel: StormTok</a></li>
        <li style="margin-bottom:1.2em;"><a href="designer-tornadoes.html" style="display:block;padding:1em 1.2em;background:#fff;border-radius:6px;box-shadow:0 1px 4px rgba(0,0,0,0.04);color:#232728;text-decoration:none;font-weight:600;">Scientists Say Tornadoes Now Coming in Designer Colors</a></li>
      </ul>
    </aside>
  </main>
  <footer>
    <p>&copy; 2025 The Onion. All stories are fictional.</p>
</footer>

<!-- TEMPESTA AI Button -->
<button id="tempesta-toggle" style="position:fixed;bottom:2em;right:2em;z-index:1000;">🔍 TEMPESTA AI</button>

<!-- TEMPESTA AI Sidebar -->
<aside id="tempesta-panel" style="display:none;position:fixed;top:0;right:0;width:340px;max-width:90vw;height:100vh;background:#fff;box-shadow:-2px 0 16px rgba(0,0,0,0.12);padding:2em 1.5em 1em 1.5em;z-index:2000;overflow-y:auto;">
  <button id="tempesta-close" style="position:absolute;top:1em;right:1em;background:none;border:none;font-size:1.7em;cursor:pointer;line-height:1;">&times;</button>
  <h2 style="margin-top:0.2em;">TEMPESTA AI Scan</h2>
  <ul id="tempesta-explanations" style="padding-left:0;list-style:none;"></ul>
  <p style="font-size: 0.75rem; margin-top: 1rem; opacity: 0.7;">* TEMPESTA AI is powered entirely by vibes. No actual facts were harmed in the making of this algorithm.</p>
</aside>

<script>
const labelMap = {
  green: {
    label: '🟢 TRUE',
    explanation: 'Certified by the International Society of Obvious Facts. May cause smugness.'
  },
  yellow: {
    label: '🟡 LOOK INTO',
    explanation: 'This claim is in a quantum state of truth. Both true and false until observed by your aunt on Facebook.'
  },
  red: {
    label: '🔴 FALSE',
    explanation: 'This is so false, it was last seen running for office. Handle with disbelief.'
  }
};

function splitIntoSegments(text) {
  // Split by sentence or clause for fun highlighting
  return text.match(/[^.!?]+[.!?]+|[^.!?]+$/g) || [text];
}

function randomTruthLevel() {
  const levels = ['green', 'yellow', 'red'];
  return levels[Math.floor(Math.random() * levels.length)];
}

function runTempestaScan() {
  const story = document.querySelector('.main-story');
  if (!story) return;
  const explanations = [];
  let highlightIdx = 0;
  // Only scan <p> and <h2>/<h3> for fun
  let segmentsAll = [];
  story.querySelectorAll('p, h2, h3').forEach(block => {
    if (!block.dataset.original) block.dataset.original = block.innerHTML;
    let segments = splitIntoSegments(block.textContent).map(seg => ({ seg, block }));
    segmentsAll = segmentsAll.concat(segments);
  });
  // Shuffle segments for randomness
  for (let i = segmentsAll.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [segmentsAll[i], segmentsAll[j]] = [segmentsAll[j], segmentsAll[i]];
  }
  // Pick 6 segments, 2 of each color
  const colors = ['green', 'yellow', 'red'];
  let colorCounts = { green: 0, yellow: 0, red: 0 };
  let chosen = [];
  for (let seg of segmentsAll) {
    let availableColors = colors.filter(c => colorCounts[c] < 2);
    if (availableColors.length === 0 || chosen.length === 6) break;
    let color = availableColors[Math.floor(Math.random() * availableColors.length)];
    colorCounts[color]++;
    chosen.push({ ...seg, level: color });
  }
  // Mark all blocks as original
  story.querySelectorAll('p, h2, h3').forEach(block => {
    block.innerHTML = block.dataset.original;
  });
  // Highlight chosen segments
  let explanationsFinal = [];
  chosen.forEach((item, idx) => {
    const { seg, block, level } = item;
    const id = `tempesta-hl-${idx}`;
    // Replace the first occurrence of the segment in the block
    let html = block.innerHTML;
    let safeSeg = seg.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    let regex = new RegExp(safeSeg);
    block.innerHTML = html.replace(regex, `<span class="tempesta-hl ${level}" data-id="${id}" style="cursor:pointer;">${seg}</span>`);
    explanationsFinal.push({
      id,
      level,
      text: seg.trim(),
      explanation: labelMap[level].explanation
    });
  });
  // Render sidebar explanations
  const sidebar = document.getElementById('tempesta-explanations');
  sidebar.innerHTML = explanationsFinal.map(e =>
    `<li style="margin-bottom:1em;">
      <span class="${e.level}" data-id="${e.id}" style="font-weight:bold;cursor:pointer;">${labelMap[e.level].label}</span>
      <span style="margin-left:0.5em;">${e.text}</span>
      <div style="font-size:0.95em;color:#888;margin-left:1.5em;">${e.explanation}</div>
    </li>`
  ).join('');
}

function clearTempestaScan() {
  const story = document.querySelector('.main-story');
  if (!story) return;
  story.querySelectorAll('p, h2, h3').forEach(block => {
    if (block.dataset.original) block.innerHTML = block.dataset.original;
  });
  document.getElementById('tempesta-explanations').innerHTML = '';
}

function toggleTempestaPanel() {
  const panel = document.getElementById('tempesta-panel');
  if (!panel) return;
  const isOpen = panel.style.display === 'block';
  if (isOpen) {
    panel.style.display = 'none';
    clearTempestaScan();
  } else {
    panel.style.display = 'block';
    runTempestaScan();
  }
}


document.getElementById('tempesta-toggle').addEventListener('click', toggleTempestaPanel);
// X button closes the sidebar
document.getElementById('tempesta-close').addEventListener('click', function() {
  const panel = document.getElementById('tempesta-panel');
  panel.style.display = 'none';
  clearTempestaScan();
});

// Click on sidebar explanation scrolls to highlight
document.getElementById('tempesta-explanations').addEventListener('click', function(e) {
  const id = e.target.dataset.id;
  if (!id) return;
  const el = document.querySelector(`.tempesta-hl[data-id="${id}"]`);
  if (el) {
    el.scrollIntoView({ behavior: 'smooth', block: 'center' });
    el.style.background = '#fffae0';
    setTimeout(() => { el.style.background = ''; }, 1200);
  }
});
</script>
<script>
// Storm alert after 30 seconds
setTimeout(function() {
  alert('⚠️ STORM WARNING: A severe storm is heading your way! Please evacuate or take shelter immediately. (This is a satirical alert.)');
}, 30000);
</script>
</body>
</html>